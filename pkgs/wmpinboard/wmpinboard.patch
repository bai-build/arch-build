diff -purN wmpinboard-1.0.orig/acconfig.h wmpinboard-1.0/acconfig.h
--- wmpinboard-1.0.orig/acconfig.h	2000-12-08 12:42:22.000000000 -0700
+++ wmpinboard-1.0/acconfig.h	1969-12-31 17:00:00.000000000 -0700
@@ -1,12 +0,0 @@
-/* define if the XPM library is available */
-#undef HAVE_LIBXPM
-
-/* define if there is an 8-bit-clean memcmp() */
-#undef HAVE_MEMCMP
-
-/* define the edit mode timeout in seconds (0 disables) */
-#undef TIMEOUT
-
-/* define if wear & tear of notes (creases) is to be simulated */
-#undef CREASES
-
Binary files wmpinboard-1.0.orig/.acconfig.h.swp and wmpinboard-1.0/.acconfig.h.swp differ
diff -purN wmpinboard-1.0.orig/aclocal.m4 wmpinboard-1.0/aclocal.m4
--- wmpinboard-1.0.orig/aclocal.m4	2000-12-08 12:42:22.000000000 -0700
+++ wmpinboard-1.0/aclocal.m4	2013-03-26 04:08:14.000000000 -0600
@@ -1,4 +1,4 @@
-dnl aclocal.m4 generated automatically by aclocal 1.4
+dnl aclocal.m4 generated automatically by aclocal 1.4-p4
 
 dnl Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
 dnl This file is free software; the Free Software Foundation
@@ -125,3 +125,21 @@ for am_file in <<$1>>; do
 done<<>>dnl>>)
 changequote([,]))])
 
+#serial 1
+# This test replaces the one in autoconf.
+# Currently this macro should have the same name as the autoconf macro
+# because gettext's gettext.m4 (distributed in the automake package)
+# still uses it.  Otherwise, the use in gettext.m4 makes autoheader
+# give these diagnostics:
+#   configure.in:556: AC_TRY_COMPILE was called before AC_ISC_POSIX
+#   configure.in:556: AC_TRY_RUN was called before AC_ISC_POSIX
+
+undefine([AC_ISC_POSIX])
+
+AC_DEFUN([AC_ISC_POSIX],
+  [
+    dnl This test replaces the obsolescent AC_ISC_POSIX kludge.
+    AC_CHECK_LIB(cposix, strerror, [LIBS="$LIBS -lcposix"])
+  ]
+)
+
diff -purN wmpinboard-1.0.orig/autogen.sh wmpinboard-1.0/autogen.sh
--- wmpinboard-1.0.orig/autogen.sh	1969-12-31 17:00:00.000000000 -0700
+++ wmpinboard-1.0/autogen.sh	2013-03-26 04:08:14.000000000 -0600
@@ -0,0 +1,21 @@
+#!/bin/sh
+#
+# autogen.sh glue for wmpinboard
+# $Id: autogen.sh,v 1.3 2001/07/03 02:14:16 hmh Exp $
+#
+set -e
+
+# The idea is that we make sure we're always using an up-to-date
+# version of all the auto* script chain for the build. The GNU autotools
+# are rather badly designed in that area.
+
+aclocal
+autoheader
+
+#we don't use symlinks because of debian's build system,
+#but they would be a better choice.
+[ -r /usr/share/automake/missing ] && cp -f /usr/share/automake/missing .
+[ -r /usr/share/automake/install-sh ] && cp -f /usr/share/automake/install-sh .
+
+automake
+autoconf
diff -purN wmpinboard-1.0.orig/config.h.in wmpinboard-1.0/config.h.in
--- wmpinboard-1.0.orig/config.h.in	2000-12-08 12:42:23.000000000 -0700
+++ wmpinboard-1.0/config.h.in	2013-03-26 04:08:14.000000000 -0600
@@ -1,4 +1,4 @@
-/* config.h.in.  Generated automatically from configure.in by autoheader.  */
+/* config.h.in.  Generated automatically from configure.in by autoheader 2.13.  */
 
 /* Define to empty if the keyword does not work.  */
 #undef const
@@ -6,9 +6,6 @@
 /* Define as __inline if that's what the C compiler calls it.  */
 #undef inline
 
-/* Define if you need to in order for stat and other things to work.  */
-#undef _POSIX_SOURCE
-
 /* Define if the X Window System is missing or not being used.  */
 #undef X_DISPLAY_MISSING
 
diff -purN wmpinboard-1.0.orig/configure wmpinboard-1.0/configure
--- wmpinboard-1.0.orig/configure	2000-12-08 12:42:23.000000000 -0700
+++ wmpinboard-1.0/configure	2013-03-26 04:08:14.000000000 -0600
@@ -1006,27 +1006,49 @@ else
 fi
 
 CFLAGS=`echo "x $CFLAGS"|sed 's/^x //; s/\(^\| \)-g\($\| \)/ /g'`
-echo $ac_n "checking for POSIXized ISC""... $ac_c" 1>&6
-echo "configure:1011: checking for POSIXized ISC" >&5
-if test -d /etc/conf/kconfig.d &&
-  grep _POSIX_VERSION /usr/include/sys/unistd.h >/dev/null 2>&1
-then
-  echo "$ac_t""yes" 1>&6
-  ISC=yes # If later tests want to check for ISC.
-  cat >> confdefs.h <<\EOF
-#define _POSIX_SOURCE 1
+
+        echo $ac_n "checking for strerror in -lcposix""... $ac_c" 1>&6
+echo "configure:1012: checking for strerror in -lcposix" >&5
+ac_lib_var=`echo cposix'_'strerror | sed 'y%./+-%__p_%'`
+if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  ac_save_LIBS="$LIBS"
+LIBS="-lcposix  $LIBS"
+cat > conftest.$ac_ext <<EOF
+#line 1020 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+char strerror();
+
+int main() {
+strerror()
+; return 0; }
 EOF
+if { (eval echo configure:1031: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=yes"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_$ac_lib_var=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
 
-  if test "$GCC" = yes; then
-    CC="$CC -posix"
-  else
-    CC="$CC -Xp"
-  fi
+fi
+if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+  LIBS="$LIBS -lcposix"
 else
   echo "$ac_t""no" 1>&6
-  ISC=
 fi
 
+  
+
 ac_ext=c
 # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
 ac_cpp='$CPP $CPPFLAGS'
@@ -1042,7 +1064,7 @@ if test x$GCC = xyes; then
 fi
 
 echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
-echo "configure:1046: checking how to run the C preprocessor" >&5
+echo "configure:1068: checking how to run the C preprocessor" >&5
 # On Suns, sometimes $CPP names a directory.
 if test -n "$CPP" && test -d "$CPP"; then
   CPP=
@@ -1057,13 +1079,13 @@ else
   # On the NeXT, cc -E runs the code through the compiler's parser,
   # not just through cpp.
   cat > conftest.$ac_ext <<EOF
-#line 1061 "configure"
+#line 1083 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1067: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:1089: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -1074,13 +1096,13 @@ else
   rm -rf conftest*
   CPP="${CC-cc} -E -traditional-cpp"
   cat > conftest.$ac_ext <<EOF
-#line 1078 "configure"
+#line 1100 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1084: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:1106: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -1091,13 +1113,13 @@ else
   rm -rf conftest*
   CPP="${CC-cc} -nologo -E"
   cat > conftest.$ac_ext <<EOF
-#line 1095 "configure"
+#line 1117 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1101: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:1123: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -1126,7 +1148,7 @@ echo "$ac_t""$CPP" 1>&6
 # Uses ac_ vars as temps to allow command line to override cache and checks.
 # --without-x overrides everything else, but does not touch the cache.
 echo $ac_n "checking for X""... $ac_c" 1>&6
-echo "configure:1130: checking for X" >&5
+echo "configure:1152: checking for X" >&5
 
 # Check whether --with-x or --without-x was given.
 if test "${with_x+set}" = set; then
@@ -1188,12 +1210,12 @@ if test "$ac_x_includes" = NO; then
 
   # First, try using that file with no special directory specified.
 cat > conftest.$ac_ext <<EOF
-#line 1192 "configure"
+#line 1214 "configure"
 #include "confdefs.h"
 #include <$x_direct_test_include>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1197: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:1219: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -1262,14 +1284,14 @@ if test "$ac_x_libraries" = NO; then
   ac_save_LIBS="$LIBS"
   LIBS="-l$x_direct_test_library $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1266 "configure"
+#line 1288 "configure"
 #include "confdefs.h"
 
 int main() {
 ${x_direct_test_function}()
 ; return 0; }
 EOF
-if { (eval echo configure:1273: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1295: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   LIBS="$ac_save_LIBS"
 # We can link X programs with no special library path.
@@ -1375,17 +1397,17 @@ else
     case "`(uname -sr) 2>/dev/null`" in
     "SunOS 5"*)
       echo $ac_n "checking whether -R must be followed by a space""... $ac_c" 1>&6
-echo "configure:1379: checking whether -R must be followed by a space" >&5
+echo "configure:1401: checking whether -R must be followed by a space" >&5
       ac_xsave_LIBS="$LIBS"; LIBS="$LIBS -R$x_libraries"
       cat > conftest.$ac_ext <<EOF
-#line 1382 "configure"
+#line 1404 "configure"
 #include "confdefs.h"
 
 int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:1389: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1411: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_R_nospace=yes
 else
@@ -1401,14 +1423,14 @@ rm -f conftest*
       else
 	LIBS="$ac_xsave_LIBS -R $x_libraries"
 	cat > conftest.$ac_ext <<EOF
-#line 1405 "configure"
+#line 1427 "configure"
 #include "confdefs.h"
 
 int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:1412: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1434: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_R_space=yes
 else
@@ -1440,7 +1462,7 @@ rm -f conftest*
     # libraries were built with DECnet support.  And karl@cs.umb.edu says
     # the Alpha needs dnet_stub (dnet does not exist).
     echo $ac_n "checking for dnet_ntoa in -ldnet""... $ac_c" 1>&6
-echo "configure:1444: checking for dnet_ntoa in -ldnet" >&5
+echo "configure:1466: checking for dnet_ntoa in -ldnet" >&5
 ac_lib_var=`echo dnet'_'dnet_ntoa | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1448,7 +1470,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldnet  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1452 "configure"
+#line 1474 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -1459,7 +1481,7 @@ int main() {
 dnet_ntoa()
 ; return 0; }
 EOF
-if { (eval echo configure:1463: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1485: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -1481,7 +1503,7 @@ fi
 
     if test $ac_cv_lib_dnet_dnet_ntoa = no; then
       echo $ac_n "checking for dnet_ntoa in -ldnet_stub""... $ac_c" 1>&6
-echo "configure:1485: checking for dnet_ntoa in -ldnet_stub" >&5
+echo "configure:1507: checking for dnet_ntoa in -ldnet_stub" >&5
 ac_lib_var=`echo dnet_stub'_'dnet_ntoa | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1489,7 +1511,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-ldnet_stub  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1493 "configure"
+#line 1515 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -1500,7 +1522,7 @@ int main() {
 dnet_ntoa()
 ; return 0; }
 EOF
-if { (eval echo configure:1504: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1526: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -1529,12 +1551,12 @@ fi
     # The nsl library prevents programs from opening the X display
     # on Irix 5.2, according to dickey@clark.net.
     echo $ac_n "checking for gethostbyname""... $ac_c" 1>&6
-echo "configure:1533: checking for gethostbyname" >&5
+echo "configure:1555: checking for gethostbyname" >&5
 if eval "test \"`echo '$''{'ac_cv_func_gethostbyname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1538 "configure"
+#line 1560 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char gethostbyname(); below.  */
@@ -1557,7 +1579,7 @@ gethostbyname();
 
 ; return 0; }
 EOF
-if { (eval echo configure:1561: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1583: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_gethostbyname=yes"
 else
@@ -1578,7 +1600,7 @@ fi
 
     if test $ac_cv_func_gethostbyname = no; then
       echo $ac_n "checking for gethostbyname in -lnsl""... $ac_c" 1>&6
-echo "configure:1582: checking for gethostbyname in -lnsl" >&5
+echo "configure:1604: checking for gethostbyname in -lnsl" >&5
 ac_lib_var=`echo nsl'_'gethostbyname | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1586,7 +1608,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1590 "configure"
+#line 1612 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -1597,7 +1619,7 @@ int main() {
 gethostbyname()
 ; return 0; }
 EOF
-if { (eval echo configure:1601: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1623: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -1627,12 +1649,12 @@ fi
     # -lsocket must be given before -lnsl if both are needed.
     # We assume that if connect needs -lnsl, so does gethostbyname.
     echo $ac_n "checking for connect""... $ac_c" 1>&6
-echo "configure:1631: checking for connect" >&5
+echo "configure:1653: checking for connect" >&5
 if eval "test \"`echo '$''{'ac_cv_func_connect'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1636 "configure"
+#line 1658 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char connect(); below.  */
@@ -1655,7 +1677,7 @@ connect();
 
 ; return 0; }
 EOF
-if { (eval echo configure:1659: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1681: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_connect=yes"
 else
@@ -1676,7 +1698,7 @@ fi
 
     if test $ac_cv_func_connect = no; then
       echo $ac_n "checking for connect in -lsocket""... $ac_c" 1>&6
-echo "configure:1680: checking for connect in -lsocket" >&5
+echo "configure:1702: checking for connect in -lsocket" >&5
 ac_lib_var=`echo socket'_'connect | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1684,7 +1706,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lsocket $X_EXTRA_LIBS $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1688 "configure"
+#line 1710 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -1695,7 +1717,7 @@ int main() {
 connect()
 ; return 0; }
 EOF
-if { (eval echo configure:1699: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1721: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -1719,12 +1741,12 @@ fi
 
     # gomez@mi.uni-erlangen.de says -lposix is necessary on A/UX.
     echo $ac_n "checking for remove""... $ac_c" 1>&6
-echo "configure:1723: checking for remove" >&5
+echo "configure:1745: checking for remove" >&5
 if eval "test \"`echo '$''{'ac_cv_func_remove'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1728 "configure"
+#line 1750 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char remove(); below.  */
@@ -1747,7 +1769,7 @@ remove();
 
 ; return 0; }
 EOF
-if { (eval echo configure:1751: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1773: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_remove=yes"
 else
@@ -1768,7 +1790,7 @@ fi
 
     if test $ac_cv_func_remove = no; then
       echo $ac_n "checking for remove in -lposix""... $ac_c" 1>&6
-echo "configure:1772: checking for remove in -lposix" >&5
+echo "configure:1794: checking for remove in -lposix" >&5
 ac_lib_var=`echo posix'_'remove | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1776,7 +1798,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lposix  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1780 "configure"
+#line 1802 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -1787,7 +1809,7 @@ int main() {
 remove()
 ; return 0; }
 EOF
-if { (eval echo configure:1791: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1813: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -1811,12 +1833,12 @@ fi
 
     # BSDI BSD/OS 2.1 needs -lipc for XOpenDisplay.
     echo $ac_n "checking for shmat""... $ac_c" 1>&6
-echo "configure:1815: checking for shmat" >&5
+echo "configure:1837: checking for shmat" >&5
 if eval "test \"`echo '$''{'ac_cv_func_shmat'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1820 "configure"
+#line 1842 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char shmat(); below.  */
@@ -1839,7 +1861,7 @@ shmat();
 
 ; return 0; }
 EOF
-if { (eval echo configure:1843: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1865: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_shmat=yes"
 else
@@ -1860,7 +1882,7 @@ fi
 
     if test $ac_cv_func_shmat = no; then
       echo $ac_n "checking for shmat in -lipc""... $ac_c" 1>&6
-echo "configure:1864: checking for shmat in -lipc" >&5
+echo "configure:1886: checking for shmat in -lipc" >&5
 ac_lib_var=`echo ipc'_'shmat | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1868,7 +1890,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lipc  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1872 "configure"
+#line 1894 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -1879,7 +1901,7 @@ int main() {
 shmat()
 ; return 0; }
 EOF
-if { (eval echo configure:1883: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1905: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -1912,7 +1934,7 @@ fi
   # libraries we check for below, so use a different variable.
   #  --interran@uluru.Stanford.EDU, kb@cs.umb.edu.
   echo $ac_n "checking for IceConnectionNumber in -lICE""... $ac_c" 1>&6
-echo "configure:1916: checking for IceConnectionNumber in -lICE" >&5
+echo "configure:1938: checking for IceConnectionNumber in -lICE" >&5
 ac_lib_var=`echo ICE'_'IceConnectionNumber | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1920,7 +1942,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lICE $X_EXTRA_LIBS $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1924 "configure"
+#line 1946 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -1931,7 +1953,7 @@ int main() {
 IceConnectionNumber()
 ; return 0; }
 EOF
-if { (eval echo configure:1935: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1957: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -1956,7 +1978,7 @@ fi
 fi
 
 echo $ac_n "checking for main in -lXpm""... $ac_c" 1>&6
-echo "configure:1960: checking for main in -lXpm" >&5
+echo "configure:1982: checking for main in -lXpm" >&5
 ac_lib_var=`echo Xpm'_'main | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1964,14 +1986,14 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-lXpm $X_LIBS -lX11 -lXext $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1968 "configure"
+#line 1990 "configure"
 #include "confdefs.h"
 
 int main() {
 main()
 ; return 0; }
 EOF
-if { (eval echo configure:1975: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1997: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -1997,7 +2019,7 @@ fi
 
 
 echo $ac_n "checking for sense in -life""... $ac_c" 1>&6
-echo "configure:2001: checking for sense in -life" >&5
+echo "configure:2023: checking for sense in -life" >&5
 ac_lib_var=`echo ife'_'sense | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -2005,7 +2027,7 @@ else
   ac_save_LIBS="$LIBS"
 LIBS="-life  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2009 "configure"
+#line 2031 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -2016,7 +2038,7 @@ int main() {
 sense()
 ; return 0; }
 EOF
-if { (eval echo configure:2020: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2042: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -2045,12 +2067,12 @@ fi
 
 
 echo $ac_n "checking for working const""... $ac_c" 1>&6
-echo "configure:2049: checking for working const" >&5
+echo "configure:2071: checking for working const" >&5
 if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2054 "configure"
+#line 2076 "configure"
 #include "confdefs.h"
 
 int main() {
@@ -2099,7 +2121,7 @@ ccp = (char const *const *) p;
 
 ; return 0; }
 EOF
-if { (eval echo configure:2103: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:2125: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_c_const=yes
 else
@@ -2120,21 +2142,21 @@ EOF
 fi
 
 echo $ac_n "checking for inline""... $ac_c" 1>&6
-echo "configure:2124: checking for inline" >&5
+echo "configure:2146: checking for inline" >&5
 if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_cv_c_inline=no
 for ac_kw in inline __inline__ __inline; do
   cat > conftest.$ac_ext <<EOF
-#line 2131 "configure"
+#line 2153 "configure"
 #include "confdefs.h"
 
 int main() {
 } $ac_kw foo() {
 ; return 0; }
 EOF
-if { (eval echo configure:2138: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:2160: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_c_inline=$ac_kw; break
 else
@@ -2163,17 +2185,17 @@ for ac_hdr in getopt.h malloc.h signal.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2167: checking for $ac_hdr" >&5
+echo "configure:2189: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2172 "configure"
+#line 2194 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2177: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:2199: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -2200,12 +2222,12 @@ fi
 done
 
 echo $ac_n "checking for getopt""... $ac_c" 1>&6
-echo "configure:2204: checking for getopt" >&5
+echo "configure:2226: checking for getopt" >&5
 if eval "test \"`echo '$''{'ac_cv_func_getopt'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2209 "configure"
+#line 2231 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char getopt(); below.  */
@@ -2228,7 +2250,7 @@ getopt();
 
 ; return 0; }
 EOF
-if { (eval echo configure:2232: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2254: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_getopt=yes"
 else
@@ -2249,12 +2271,12 @@ need_getopt=yes
 fi
 
 echo $ac_n "checking for getopt_long""... $ac_c" 1>&6
-echo "configure:2253: checking for getopt_long" >&5
+echo "configure:2275: checking for getopt_long" >&5
 if eval "test \"`echo '$''{'ac_cv_func_getopt_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2258 "configure"
+#line 2280 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char getopt_long(); below.  */
@@ -2277,7 +2299,7 @@ getopt_long();
 
 ; return 0; }
 EOF
-if { (eval echo configure:2281: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2303: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_getopt_long=yes"
 else
@@ -2298,7 +2320,7 @@ need_getopt_long=yes
 fi
 
 echo $ac_n "checking for 8-bit clean memcmp""... $ac_c" 1>&6
-echo "configure:2302: checking for 8-bit clean memcmp" >&5
+echo "configure:2324: checking for 8-bit clean memcmp" >&5
 if eval "test \"`echo '$''{'ac_cv_func_memcmp_clean'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2306,7 +2328,7 @@ else
   ac_cv_func_memcmp_clean=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 2310 "configure"
+#line 2332 "configure"
 #include "confdefs.h"
 
 main()
@@ -2316,7 +2338,7 @@ main()
 }
 
 EOF
-if { (eval echo configure:2320: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:2342: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_func_memcmp_clean=yes
 else
@@ -2342,12 +2364,12 @@ else
   need_memcmp=yes
 fi
 echo $ac_n "checking for strchr""... $ac_c" 1>&6
-echo "configure:2346: checking for strchr" >&5
+echo "configure:2368: checking for strchr" >&5
 if eval "test \"`echo '$''{'ac_cv_func_strchr'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2351 "configure"
+#line 2373 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char strchr(); below.  */
@@ -2370,7 +2392,7 @@ strchr();
 
 ; return 0; }
 EOF
-if { (eval echo configure:2374: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2396: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_strchr=yes"
 else
@@ -2391,12 +2413,12 @@ else
 fi
 
 echo $ac_n "checking for strcasecmp""... $ac_c" 1>&6
-echo "configure:2395: checking for strcasecmp" >&5
+echo "configure:2417: checking for strcasecmp" >&5
 if eval "test \"`echo '$''{'ac_cv_func_strcasecmp'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2400 "configure"
+#line 2422 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char strcasecmp(); below.  */
@@ -2419,7 +2441,7 @@ strcasecmp();
 
 ; return 0; }
 EOF
-if { (eval echo configure:2423: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2445: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_strcasecmp=yes"
 else
@@ -2440,12 +2462,12 @@ else
 fi
 
 echo $ac_n "checking for ualarm""... $ac_c" 1>&6
-echo "configure:2444: checking for ualarm" >&5
+echo "configure:2466: checking for ualarm" >&5
 if eval "test \"`echo '$''{'ac_cv_func_ualarm'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2449 "configure"
+#line 2471 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char ualarm(); below.  */
@@ -2468,7 +2490,7 @@ ualarm();
 
 ; return 0; }
 EOF
-if { (eval echo configure:2472: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2494: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_ualarm=yes"
 else
@@ -2489,12 +2511,12 @@ else
 fi
 
 echo $ac_n "checking for usleep""... $ac_c" 1>&6
-echo "configure:2493: checking for usleep" >&5
+echo "configure:2515: checking for usleep" >&5
 if eval "test \"`echo '$''{'ac_cv_func_usleep'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2498 "configure"
+#line 2520 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char usleep(); below.  */
@@ -2517,7 +2539,7 @@ usleep();
 
 ; return 0; }
 EOF
-if { (eval echo configure:2521: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2543: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_usleep=yes"
 else
@@ -2538,12 +2560,12 @@ else
 fi
 
 echo $ac_n "checking for kill""... $ac_c" 1>&6
-echo "configure:2542: checking for kill" >&5
+echo "configure:2564: checking for kill" >&5
 if eval "test \"`echo '$''{'ac_cv_func_kill'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2547 "configure"
+#line 2569 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char kill(); below.  */
@@ -2566,7 +2588,7 @@ kill();
 
 ; return 0; }
 EOF
-if { (eval echo configure:2570: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2592: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_kill=yes"
 else
diff -purN wmpinboard-1.0.orig/configure.ac wmpinboard-1.0/configure.ac
--- wmpinboard-1.0.orig/configure.ac	1969-12-31 17:00:00.000000000 -0700
+++ wmpinboard-1.0/configure.ac	2013-03-26 04:36:03.000000000 -0600
@@ -0,0 +1,107 @@
+dnl Process this file with autoconf to produce a configure script.
+
+AC_INIT([wmpinboard], [1.0])
+AM_INIT_AUTOMAKE([-Wall silent-rules])
+AM_CONFIG_HEADER(config.h)
+
+AC_PROG_CC
+dnl don't want the -g flag
+CFLAGS=`echo "x $CFLAGS"|sed 's/^x //; s/\(^\| \)-g\($\| \)/ /g'`
+AC_ISC_POSIX
+AC_LANG_C
+
+dnl use POSIX and BSD stuff where available
+CFLAGS="$CFLAGS -D_BSD_SOURCE -D_POSIX_SOURCE=199506L"
+
+dnl additional compile flags when using gcc
+if test x$GCC = xyes; then
+  CFLAGS="$CFLAGS -Wall -ansi -pedantic"
+fi
+
+dnl X11 stuff
+AC_PATH_XTRA
+AC_CHECK_LIB(Xpm, main, AC_DEFINE([HAVE_LIBXPM], 1,
+  [define if the XPM library is available]),
+  AC_MSG_ERROR(The XPM library is required but wasn't found.),
+  $X_LIBS -lX11 -lXext)
+
+AC_CHECK_LIB(ife, sense)
+
+AC_C_CONST
+AC_C_INLINE
+dnl check for C headers and functions
+dnl more or less optional ones first
+AC_CHECK_HEADERS([getopt.h malloc.h signal.h string.h unistd.h])
+AC_CHECK_FUNC(getopt, , need_getopt=yes)
+AC_CHECK_FUNC(getopt_long, , need_getopt_long=yes)
+AC_FUNC_MEMCMP
+if test x"$ac_cv_func_memcmp_clean" = xyes; then
+  AC_DEFINE([HAVE_MEMCMP], 1,
+  [define if there is an 8-bit-clean memcmp()])
+else
+  need_memcmp=yes
+fi
+dnl required ones
+AC_CHECK_FUNC(strchr, ,
+  AC_MSG_ERROR(Your C library seems to be lacking the strchr() function.))
+AC_CHECK_FUNC(strcasecmp, ,
+  AC_MSG_ERROR(Your C library seems to be lacking the strcasecmp() function.))
+AC_CHECK_FUNC(ualarm, ,
+  AC_MSG_ERROR(Your C library seems to be lacking the ualarm() function.))
+AC_CHECK_FUNC(usleep, ,
+  AC_MSG_ERROR(Your C library seems to be lacking the usleep() function.))
+AC_CHECK_FUNC(kill, ,
+  AC_MSG_ERROR(Your C library seems to be lacking the kill() function.))
+
+dnl === compile-time options ===
+dnl TIMEOUT
+AC_ARG_ENABLE(timeout,
+[  --enable-timeout[=TIME] set edit mode timeout to TIME seconds (default = 60)],
+[case "${enableval}" in
+	yes)	timeout=60 ;;
+	no)		timeout=0 ;;
+	*)		timeout=`echo "${enableval}"|sed 's/[^0-9]//g'`
+			if test x"$timeout" = x; then
+				AC_MSG_ERROR(Bad value ${enableval} for --enable-timeout.)
+			fi
+			if test $timeout -gt 0 -a $timeout -lt 5; then
+				timeout=5
+				AC_MSG_WARN(Timeout value to low: increasing to 5 seconds.)
+			fi
+			;;
+esac], [timeout=60])
+AC_DEFINE_UNQUOTED(TIMEOUT, ${timeout},
+  [define the edit mode timeout in seconds (0 disables)])
+
+dnl CREASES
+AC_ARG_ENABLE(creases,
+[  --enable-creases        enable wear and tear (creases) (default = yes)],
+[case "${enableval}" in
+	yes)	creases=yes ;;
+	no)		creases=no ;;
+	*)		AC_MSG_ERROR(Bad value ${enableval} for --enable-creases.) ;;
+esac], [creases=yes])
+if test x"$creases" = xyes; then
+  AC_DEFINE([CREASES], 1,
+  [define if wear & tear of notes (creases) is to be simulated])
+fi
+
+dnl determine what conditional stuff has to be compiled
+if test x"$need_memcmp" = xyes; then
+  CONDITIONAL_SOURCES="$CONDITIONAL_SOURCES memcmp.c"
+fi
+if test x"$need_getopt" = xyes; then
+  CONDITIONAL_SOURCES="$CONDITIONAL_SOURCES getopt.c"
+fi
+if test x"$need_getopt_long" = xyes; then
+  CONDITIONAL_SOURCES="$CONDITIONAL_SOURCES getopt1.c"
+fi
+AC_SUBST(CONDITIONAL_SOURCES)
+
+AC_OUTPUT([
+Makefile
+src/Makefile
+man/Makefile
+wmpinboard.spec
+])
+
Binary files wmpinboard-1.0.orig/.configure.ac.swp and wmpinboard-1.0/.configure.ac.swp differ
diff -purN wmpinboard-1.0.orig/configure.in wmpinboard-1.0/configure.in
--- wmpinboard-1.0.orig/configure.in	2000-12-08 12:42:23.000000000 -0700
+++ wmpinboard-1.0/configure.in	1969-12-31 17:00:00.000000000 -0700
@@ -1,103 +0,0 @@
-dnl Process this file with autoconf to produce a configure script.
-
-AC_INIT(configure.in)
-AM_INIT_AUTOMAKE(wmpinboard, 1.0)
-AM_CONFIG_HEADER(config.h)
-
-AC_PROG_CC
-dnl don't want the -g flag
-CFLAGS=`echo "x $CFLAGS"|sed 's/^x //; s/\(^\| \)-g\($\| \)/ /g'`
-AC_ISC_POSIX
-AC_LANG_C
-
-dnl use POSIX and BSD stuff where available
-CFLAGS="$CFLAGS -D_BSD_SOURCE -D_POSIX_SOURCE=199506L"
-
-dnl additional compile flags when using gcc
-if test x$GCC = xyes; then
-  CFLAGS="$CFLAGS -Wall -ansi -pedantic"
-fi
-
-dnl X11 stuff
-AC_PATH_XTRA
-AC_CHECK_LIB(Xpm, main, AC_DEFINE(HAVE_LIBXPM),
-  AC_MSG_ERROR(The XPM library is required but wasn't found.),
-  $X_LIBS -lX11 -lXext)
-
-AC_CHECK_LIB(ife, sense)
-
-AC_C_CONST
-AC_C_INLINE
-dnl check for C headers and functions
-dnl more or less optional ones first
-AC_CHECK_HEADERS([getopt.h malloc.h signal.h string.h unistd.h])
-AC_CHECK_FUNC(getopt, , need_getopt=yes)
-AC_CHECK_FUNC(getopt_long, , need_getopt_long=yes)
-AC_FUNC_MEMCMP
-if test x"$ac_cv_func_memcmp_clean" = xyes; then
-  AC_DEFINE(HAVE_MEMCMP)
-else
-  need_memcmp=yes
-fi
-dnl required ones
-AC_CHECK_FUNC(strchr, ,
-  AC_MSG_ERROR(Your C library seems to be lacking the strchr() function.))
-AC_CHECK_FUNC(strcasecmp, ,
-  AC_MSG_ERROR(Your C library seems to be lacking the strcasecmp() function.))
-AC_CHECK_FUNC(ualarm, ,
-  AC_MSG_ERROR(Your C library seems to be lacking the ualarm() function.))
-AC_CHECK_FUNC(usleep, ,
-  AC_MSG_ERROR(Your C library seems to be lacking the usleep() function.))
-AC_CHECK_FUNC(kill, ,
-  AC_MSG_ERROR(Your C library seems to be lacking the kill() function.))
-
-dnl === compile-time options ===
-dnl TIMEOUT
-AC_ARG_ENABLE(timeout,
-[  --enable-timeout[=TIME] set edit mode timeout to TIME seconds (default = 60)],
-[case "${enableval}" in
-	yes)	timeout=60 ;;
-	no)		timeout=0 ;;
-	*)		timeout=`echo "${enableval}"|sed 's/[^0-9]//g'`
-			if test x"$timeout" = x; then
-				AC_MSG_ERROR(Bad value ${enableval} for --enable-timeout.)
-			fi
-			if test $timeout -gt 0 -a $timeout -lt 5; then
-				timeout=5
-				AC_MSG_WARN(Timeout value to low: increasing to 5 seconds.)
-			fi
-			;;
-esac], [timeout=60])
-AC_DEFINE_UNQUOTED(TIMEOUT, ${timeout})
-
-dnl CREASES
-AC_ARG_ENABLE(creases,
-[  --enable-creases        enable wear and tear (creases) (default = yes)],
-[case "${enableval}" in
-	yes)	creases=yes ;;
-	no)		creases=no ;;
-	*)		AC_MSG_ERROR(Bad value ${enableval} for --enable-creases.) ;;
-esac], [creases=yes])
-if test x"$creases" = xyes; then
-  AC_DEFINE(CREASES)
-fi
-
-dnl determine what conditional stuff has to be compiled
-if test x"$need_memcmp" = xyes; then
-  CONDITIONAL_SOURCES="$CONDITIONAL_SOURCES memcmp.c"
-fi
-if test x"$need_getopt" = xyes; then
-  CONDITIONAL_SOURCES="$CONDITIONAL_SOURCES getopt.c"
-fi
-if test x"$need_getopt_long" = xyes; then
-  CONDITIONAL_SOURCES="$CONDITIONAL_SOURCES getopt1.c"
-fi
-AC_SUBST(CONDITIONAL_SOURCES)
-
-AC_OUTPUT([
-Makefile
-src/Makefile
-man/Makefile
-wmpinboard.spec
-])
-
diff -purN wmpinboard-1.0.orig/.cvsignore wmpinboard-1.0/.cvsignore
--- wmpinboard-1.0.orig/.cvsignore	1969-12-31 17:00:00.000000000 -0700
+++ wmpinboard-1.0/.cvsignore	2013-03-26 04:08:14.000000000 -0600
@@ -0,0 +1,5 @@
+aclocal.m4
+configure
+install-sh
+missing
+Makefile.in
diff -purN wmpinboard-1.0.orig/Makefile.in wmpinboard-1.0/Makefile.in
--- wmpinboard-1.0.orig/Makefile.in	2000-12-08 12:42:22.000000000 -0700
+++ wmpinboard-1.0/Makefile.in	2013-03-26 04:25:23.000000000 -0600
@@ -1,4 +1,4 @@
-# Makefile.in generated automatically by automake 1.4 from Makefile.am
+# Makefile.in generated automatically by automake 1.4-p4 from Makefile.am
 
 # Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
@@ -70,7 +70,7 @@ mkinstalldirs = $(SHELL) $(top_srcdir)/m
 CONFIG_HEADER = config.h
 CONFIG_CLEAN_FILES =  wmpinboard.spec
 DIST_COMMON =  README ./stamp-h.in AUTHORS COPYING ChangeLog INSTALL \
-Makefile.am Makefile.in NEWS TODO acconfig.h aclocal.m4 config.h.in \
+Makefile.am Makefile.in NEWS TODO aclocal.m4 config.h.in \
 configure configure.in install-sh missing mkinstalldirs \
 wmpinboard.spec.in
 
@@ -82,16 +82,16 @@ GZIP_ENV = --best
 all: all-redirect
 .SUFFIXES:
 $(srcdir)/Makefile.in: Makefile.am $(top_srcdir)/configure.in $(ACLOCAL_M4) 
-	cd $(top_srcdir) && $(AUTOMAKE) --gnu --include-deps Makefile
+	cd $(top_srcdir) && $(AUTOMAKE) --gnu Makefile
 
-Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status
+Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status $(BUILT_SOURCES)
 	cd $(top_builddir) \
 	  && CONFIG_FILES=$@ CONFIG_HEADERS= $(SHELL) ./config.status
 
 $(ACLOCAL_M4):  configure.in 
 	cd $(srcdir) && $(ACLOCAL)
 
-config.status: $(srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)
+config.status: $(srcdir)/configure.in $(CONFIG_STATUS_DEPENDENCIES)
 	$(SHELL) ./config.status --recheck
 $(srcdir)/configure: $(srcdir)/configure.in $(ACLOCAL_M4) $(CONFIGURE_DEPENDENCIES)
 	cd $(srcdir) && $(AUTOCONF)
@@ -111,7 +111,7 @@ $(srcdir)/config.h.in: $(srcdir)/stamp-h
 		rm -f $(srcdir)/stamp-h.in; \
 		$(MAKE) $(srcdir)/stamp-h.in; \
 	else :; fi
-$(srcdir)/stamp-h.in: $(top_srcdir)/configure.in $(ACLOCAL_M4) acconfig.h
+$(srcdir)/stamp-h.in: $(top_srcdir)/configure.in $(ACLOCAL_M4)
 	cd $(top_srcdir) && $(AUTOHEADER)
 	@echo timestamp > $(srcdir)/stamp-h.in 2> /dev/null
 
@@ -253,11 +253,16 @@ distdir: $(DISTFILES)
 	-rm -rf $(distdir)
 	mkdir $(distdir)
 	-chmod 777 $(distdir)
+	here=`cd $(top_builddir) && pwd`; \
+	top_distdir=`cd $(distdir) && pwd`; \
+	distdir=`cd $(distdir) && pwd`; \
+	cd $(top_srcdir) \
+	  && $(AUTOMAKE) --include-deps --build-dir=$$here --srcdir-name=$(top_srcdir) --output-dir=$$top_distdir --gnu Makefile
 	$(mkinstalldirs) $(distdir)/man $(distdir)/themes-kit $(distdir)/xpm
 	@for file in $(DISTFILES); do \
 	  d=$(srcdir); \
 	  if test -d $$d/$$file; then \
-	    cp -pr $$/$$file $(distdir)/$$file; \
+	    cp -pr $$d/$$file $(distdir)/$$file; \
 	  else \
 	    test -f $(distdir)/$$file \
 	    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \
diff -purN wmpinboard-1.0.orig/man/.cvsignore wmpinboard-1.0/man/.cvsignore
--- wmpinboard-1.0.orig/man/.cvsignore	1969-12-31 17:00:00.000000000 -0700
+++ wmpinboard-1.0/man/.cvsignore	2013-03-26 04:08:14.000000000 -0600
@@ -0,0 +1 @@
+Makefile.in
diff -purN wmpinboard-1.0.orig/man/Makefile.in wmpinboard-1.0/man/Makefile.in
--- wmpinboard-1.0.orig/man/Makefile.in	2000-12-08 12:42:23.000000000 -0700
+++ wmpinboard-1.0/man/Makefile.in	2013-03-26 04:08:14.000000000 -0600
@@ -1,4 +1,4 @@
-# Makefile.in generated automatically by automake 1.4 from Makefile.am
+# Makefile.in generated automatically by automake 1.4-p4 from Makefile.am
 
 # Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
@@ -83,9 +83,9 @@ GZIP_ENV = --best
 all: all-redirect
 .SUFFIXES:
 $(srcdir)/Makefile.in: Makefile.am $(top_srcdir)/configure.in $(ACLOCAL_M4) 
-	cd $(top_srcdir) && $(AUTOMAKE) --gnu --include-deps man/Makefile
+	cd $(top_srcdir) && $(AUTOMAKE) --gnu man/Makefile
 
-Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status
+Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status $(BUILT_SOURCES)
 	cd $(top_builddir) \
 	  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status
 
@@ -137,10 +137,15 @@ distdir = $(top_builddir)/$(PACKAGE)-$(V
 subdir = man
 
 distdir: $(DISTFILES)
+	here=`cd $(top_builddir) && pwd`; \
+	top_distdir=`cd $(top_distdir) && pwd`; \
+	distdir=`cd $(distdir) && pwd`; \
+	cd $(top_srcdir) \
+	  && $(AUTOMAKE) --include-deps --build-dir=$$here --srcdir-name=$(top_srcdir) --output-dir=$$top_distdir --gnu man/Makefile
 	@for file in $(DISTFILES); do \
 	  d=$(srcdir); \
 	  if test -d $$d/$$file; then \
-	    cp -pr $$/$$file $(distdir)/$$file; \
+	    cp -pr $$d/$$file $(distdir)/$$file; \
 	  else \
 	    test -f $(distdir)/$$file \
 	    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \
diff -purN wmpinboard-1.0.orig/src/.cvsignore wmpinboard-1.0/src/.cvsignore
--- wmpinboard-1.0.orig/src/.cvsignore	1969-12-31 17:00:00.000000000 -0700
+++ wmpinboard-1.0/src/.cvsignore	2013-03-26 04:08:14.000000000 -0600
@@ -0,0 +1 @@
+Makefile.in
diff -purN wmpinboard-1.0.orig/src/Makefile.am wmpinboard-1.0/src/Makefile.am
--- wmpinboard-1.0.orig/src/Makefile.am	2000-12-08 12:42:23.000000000 -0700
+++ wmpinboard-1.0/src/Makefile.am	2013-03-26 04:50:19.000000000 -0600
@@ -1,15 +1,16 @@
 ## Process this file with automake to produce Makefile.in
 
-INCLUDES = $(X_CFLAGS)
+AM_CPPFLAGS = $(X_CFLAGS)
 LIBS = $(X_LIBS) -lX11 -lXext -lXpm
 
 bin_PROGRAMS = wmpinboard
 
-wmpinboard_SOURCES = @CONDITIONAL_SOURCES@ \
+wmpinboard_SOURCES = memcmp.c \
 	misc.c misc.h \
 	notes.c notes.h \
 	wmpinboard.c wmpinboard.h \
 	xmisc.c xmisc.h
+wmpinboard_CFLAGS = -g
 
 EXTRA_wmpinboard_SOURCES = \
 	getopt.c getopt1.c getopt.h \
Binary files wmpinboard-1.0.orig/src/.Makefile.am.swp and wmpinboard-1.0/src/.Makefile.am.swp differ
diff -purN wmpinboard-1.0.orig/src/Makefile.in wmpinboard-1.0/src/Makefile.in
--- wmpinboard-1.0.orig/src/Makefile.in	2000-12-08 12:42:23.000000000 -0700
+++ wmpinboard-1.0/src/Makefile.in	2013-03-26 04:08:14.000000000 -0600
@@ -1,4 +1,4 @@
-# Makefile.in generated automatically by automake 1.4 from Makefile.am
+# Makefile.in generated automatically by automake 1.4-p4 from Makefile.am
 
 # Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
@@ -101,6 +101,8 @@ DISTFILES = $(DIST_COMMON) $(SOURCES) $(
 
 TAR = tar
 GZIP_ENV = --best
+DEP_FILES =  .deps/getopt.P .deps/getopt1.P .deps/memcmp.P .deps/misc.P \
+.deps/notes.P .deps/wmpinboard.P .deps/xmisc.P
 SOURCES = $(wmpinboard_SOURCES) $(EXTRA_wmpinboard_SOURCES)
 OBJECTS = $(wmpinboard_OBJECTS)
 
@@ -108,9 +110,9 @@ all: all-redirect
 .SUFFIXES:
 .SUFFIXES: .S .c .o .s
 $(srcdir)/Makefile.in: Makefile.am $(top_srcdir)/configure.in $(ACLOCAL_M4) 
-	cd $(top_srcdir) && $(AUTOMAKE) --gnu --include-deps src/Makefile
+	cd $(top_srcdir) && $(AUTOMAKE) --gnu src/Makefile
 
-Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status
+Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status $(BUILT_SOURCES)
 	cd $(top_builddir) \
 	  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status
 
@@ -140,9 +142,6 @@ uninstall-binPROGRAMS:
 	  rm -f $(DESTDIR)$(bindir)/`echo $$p|sed 's/$(EXEEXT)$$//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`; \
 	done
 
-.c.o:
-	$(COMPILE) -c $<
-
 .s.o:
 	$(COMPILE) -c $<
 
@@ -197,23 +196,53 @@ distdir = $(top_builddir)/$(PACKAGE)-$(V
 subdir = src
 
 distdir: $(DISTFILES)
+	here=`cd $(top_builddir) && pwd`; \
+	top_distdir=`cd $(top_distdir) && pwd`; \
+	distdir=`cd $(distdir) && pwd`; \
+	cd $(top_srcdir) \
+	  && $(AUTOMAKE) --include-deps --build-dir=$$here --srcdir-name=$(top_srcdir) --output-dir=$$top_distdir --gnu src/Makefile
 	@for file in $(DISTFILES); do \
 	  d=$(srcdir); \
 	  if test -d $$d/$$file; then \
-	    cp -pr $$/$$file $(distdir)/$$file; \
+	    cp -pr $$d/$$file $(distdir)/$$file; \
 	  else \
 	    test -f $(distdir)/$$file \
 	    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \
 	    || cp -p $$d/$$file $(distdir)/$$file || :; \
 	  fi; \
 	done
-misc.o: misc.c wmpinboard.h ../config.h
-notes.o: notes.c wmpinboard.h ../config.h misc.h xmisc.h notes.h
-wmpinboard.o: wmpinboard.c getopt.h wmpinboard.h ../config.h misc.h \
-	notes.h xmisc.h ../xpm/pinboard.xpm ../xpm/bbar.xpm \
-	../xpm/abar.xpm ../xpm/digits.xpm
-xmisc.o: xmisc.c wmpinboard.h ../config.h misc.h notes.h xmisc.h
 
+DEPS_MAGIC := $(shell mkdir .deps > /dev/null 2>&1 || :)
+
+-include $(DEP_FILES)
+
+mostlyclean-depend:
+
+clean-depend:
+
+distclean-depend:
+	-rm -rf .deps
+
+maintainer-clean-depend:
+
+%.o: %.c
+	@echo '$(COMPILE) -c $<'; \
+	$(COMPILE) -Wp,-MD,.deps/$(*F).pp -c $<
+	@-cp .deps/$(*F).pp .deps/$(*F).P; \
+	tr ' ' '\012' < .deps/$(*F).pp \
+	  | sed -e 's/^\\$$//' -e '/^$$/ d' -e '/:$$/ d' -e 's/$$/ :/' \
+	    >> .deps/$(*F).P; \
+	rm .deps/$(*F).pp
+
+%.lo: %.c
+	@echo '$(LTCOMPILE) -c $<'; \
+	$(LTCOMPILE) -Wp,-MD,.deps/$(*F).pp -c $<
+	@-sed -e 's/^\([^:]*\)\.o[ 	]*:/\1.lo \1.o :/' \
+	  < .deps/$(*F).pp > .deps/$(*F).P; \
+	tr ' ' '\012' < .deps/$(*F).pp \
+	  | sed -e 's/^\\$$//' -e '/^$$/ d' -e '/:$$/ d' -e 's/$$/ :/' \
+	    >> .deps/$(*F).P; \
+	rm -f .deps/$(*F).pp
 info-am:
 info: info-am
 dvi-am:
@@ -251,23 +280,24 @@ distclean-generic:
 
 maintainer-clean-generic:
 mostlyclean-am:  mostlyclean-binPROGRAMS mostlyclean-compile \
-		mostlyclean-tags mostlyclean-generic
+		mostlyclean-tags mostlyclean-depend mostlyclean-generic
 
 mostlyclean: mostlyclean-am
 
-clean-am:  clean-binPROGRAMS clean-compile clean-tags clean-generic \
-		mostlyclean-am
+clean-am:  clean-binPROGRAMS clean-compile clean-tags clean-depend \
+		clean-generic mostlyclean-am
 
 clean: clean-am
 
 distclean-am:  distclean-binPROGRAMS distclean-compile distclean-tags \
-		distclean-generic clean-am
+		distclean-depend distclean-generic clean-am
 
 distclean: distclean-am
 
 maintainer-clean-am:  maintainer-clean-binPROGRAMS \
 		maintainer-clean-compile maintainer-clean-tags \
-		maintainer-clean-generic distclean-am
+		maintainer-clean-depend maintainer-clean-generic \
+		distclean-am
 	@echo "This command is intended for maintainers to use;"
 	@echo "it deletes files that may require special tools to rebuild."
 
@@ -277,12 +307,13 @@ maintainer-clean: maintainer-clean-am
 maintainer-clean-binPROGRAMS uninstall-binPROGRAMS install-binPROGRAMS \
 mostlyclean-compile distclean-compile clean-compile \
 maintainer-clean-compile tags mostlyclean-tags distclean-tags \
-clean-tags maintainer-clean-tags distdir info-am info dvi-am dvi check \
-check-am installcheck-am installcheck install-exec-am install-exec \
-install-data-am install-data install-am install uninstall-am uninstall \
-all-redirect all-am all installdirs mostlyclean-generic \
-distclean-generic clean-generic maintainer-clean-generic clean \
-mostlyclean distclean maintainer-clean
+clean-tags maintainer-clean-tags distdir mostlyclean-depend \
+distclean-depend clean-depend maintainer-clean-depend info-am info \
+dvi-am dvi check check-am installcheck-am installcheck install-exec-am \
+install-exec install-data-am install-data install-am install \
+uninstall-am uninstall all-redirect all-am all installdirs \
+mostlyclean-generic distclean-generic clean-generic \
+maintainer-clean-generic clean mostlyclean distclean maintainer-clean
 
 
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
diff -purN wmpinboard-1.0.orig/src/wmpinboard.c wmpinboard-1.0/src/wmpinboard.c
--- wmpinboard-1.0.orig/src/wmpinboard.c	2000-12-08 12:42:23.000000000 -0700
+++ wmpinboard-1.0/src/wmpinboard.c	2013-03-26 04:54:32.000000000 -0600
@@ -165,7 +165,7 @@ notes_io(int save)
   char t[STRING_BUF_SIZE];
   FILE *file;
   int pid = (int) getpid();
-  static int sizes[6];
+  static int sizes[7];
   sizes[0] = size_0;
   sizes[1] = size_1;
   sizes[2] = size_2;
@@ -973,26 +973,32 @@ parse_argv(int argc, char **argv)
       case 'h': help();
       case 'i': action(M_INFO, 0);
       case 'v':
-        printf("wmpinboard v" VERSION "\n\ncompile-time configuration:\n"
-          "  - maximal number of notes is %d\n"
 #if TIMEOUT == 0
-          "  - edit mode timeout is disabled by default\n"
+#define PRINT1    "  - edit mode timeout is disabled by default\n"
 #else
-          "  - default edit mode timeout is %d seconds\n"
+#define PRINT1    "  - default edit mode timeout is %d seconds\n"
 #endif
-          "  - wear & tear of notes (creases) is "
 #ifdef CREASES
-          "enabled\n"
+#define PRINT2    "enabled\n"
 #else
-          "disabled\n"
+#define PRINT2    "disabled\n"
 #endif
 #ifndef FUNSTUFF
-          "  - FUNSTUFF is disabled  :-/\n"
+#define PRINT3    "  - FUNSTUFF is disabled  :-/\n"
+#else
+#define PRINT3
 #endif
-          , MAX_NOTES
 #if TIMEOUT != 0
-          , TIMEOUT
+#define PRINT4    , TIMEOUT
 #endif
+        printf("wmpinboard v" VERSION "\n\ncompile-time configuration:\n"
+          "  - maximal number of notes is %d\n"
+	  PRINT1
+          "  - wear & tear of notes (creases) is "
+          PRINT2
+          PRINT3
+          , MAX_NOTES
+          PRINT4
           );
         exit(EXIT_SUCCESS);
       default : exit(EXIT_FAILURE);
@@ -1532,7 +1538,7 @@ handle_ButtonRelease(XEvent *event)
         }
       } else {  /* moved */
         if (state.cur_note >= 0) {
-          if (string_empty(ndata[state.cur_note].text, 0)) {  /* new note */
+          if (note_empty(state.cur_note)) {  /* new note */
             animate_note(4);
             set_kbfocus(1);
             set_mode(M_EDIT);
@@ -1711,7 +1717,14 @@ handle_ButtonRelease(XEvent *event)
         {
           if (state.abar_pressed < 4) {  /* clicked on number */
             char c = state.a_edit[state.abar_pressed];
-            char delta = state.button == 1 ? 1 : -1;
+            char delta;
+            switch (state.button) {
+              case 1:  delta = 1;   break;  /* Left mouse button */
+              case 3:  delta = -1;  break;  /* Right mouse button */
+              case 4:  delta = 1;   break;  /* Scrollwheel up */
+              case 5:  delta = -1;  break;  /* Scrollwheel down */
+              default: delta = 0;   break;  /* Unknown button; ignore */
+            }
 
             switch (state.abar_pressed) {
               case 0:  c = (24+c+delta)%24;  break;
@@ -1849,7 +1862,7 @@ void
 handle_KeyPress(XEvent *event)
 {
   KeySym ksym;
-  unsigned char ch[4];
+  char ch[4];
   char *s;
   int i, j = 0;
 
@@ -1910,8 +1923,9 @@ handle_KeyPress(XEvent *event)
     }
   } else {
     if (InputContext) {
-      j = XmbLookupString(InputContext, &event->xkey, (char*) ch, sizeof(ch),
-        &ksym, 0);
+      Status status_return;
+      j = XmbLookupString(InputContext, &event->xkey, ch, sizeof(ch),
+        &ksym, &status_return);
     } else {
       j = XLookupString(&event->xkey, (char*) ch, sizeof(ch), &ksym,
         &state.compose);
@@ -2120,7 +2134,7 @@ main(int argc, char **argv)
   init();                  /* initialize X window */
   XSetCommand(display, mainwin, argv, argc);
   XMapWindow(display, mainwin);
-  init_xlocale();          /* initialize input context */
+/*  init_xlocale();          /* initialize input context */
 
   /* initialize internal images, palette, cursors */
   bbar = get_xpm((char**) bbar_xpm);
Binary files wmpinboard-1.0.orig/src/.wmpinboard.c.swp and wmpinboard-1.0/src/.wmpinboard.c.swp differ
