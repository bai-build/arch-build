pkgbase = shifter-slurm-git
	pkgdesc = NERSC Shifter: Linux Containers for HPC (with SLURM support)
	pkgver = 20170801
	pkgrel = 1
	url = https://github.com/NERSC/shifter
	arch = x86_64
	license = BSD
	makedepends = gcc
	makedepends = glibc
	makedepends = make
	makedepends = autoconf
	makedepends = automake
	makedepends = libtool
	makedepends = libcap
	makedepends = munge
	makedepends = json-c
	makedepends = slurm-llnl
	source = git+https://github.com/NERSC/shifter.git
	source = build_ssh.patch
	source = shifter-runtime.conf
	source = shifter-imagegw.conf
	source = shifter-imagegw.service
	source = start-imagegw.sh
	sha512sums = SKIP
	sha512sums = bcb8da45ba803f40a76902961b86783d2399732272d68554dd75e09115958c9d1cf5c8d9d6d1f0db406d36a16e404500c47fa40c70d4f17ab0c6b7d94cd28f06
	sha512sums = 8df5449ea93988364e8c350a2652e661545d883fada2f589b944cc7a2bd0d34b494f31e0f63bb0aea9c82e2805b4c9393b2290575dd14497fcd873b286d51b36
	sha512sums = c56ad3b92901abdb41cffaeceeff9a6c8dae3882aacf9a4b654a8898f1e26eeadda3ac3ac799b127b176cc31d397652f27a07bcdfbf7f4ede3c6826d08f7bd7d
	sha512sums = daf8163025a5d4099dc64cab8bab57d0b1a4101f04c563b5b03521b386d87581565d0e03c2fb3a02d791daff16cfb139244cc6bd7a886661e3caa0d107a7cb0a
	sha512sums = afd15fb203ccf76ebb2a3542cbbde216f9f988752808479f25292ef4d9949a793070eead996072b564fe19dec6c33da72be21c1732a0e7d5817b30e7306d65e3

pkgname = shifter-slurm-runtime-git
	install = shifter-slurm-runtime-git.install
	depends = munge
	depends = curl
	depends = pam
	depends = squashfs-tools
	depends = json-c
	depends = xfsprogs
	depends = wget
	depends = slurm-llnl
	provides = shifter-runtime
	conflicts = shifter-runtime
	conflicts = shifter-slurm-runtime
	conflicts = shifter-runtime-git

pkgname = shifter-slurm-imagegw-git
	install = shifter-slurm-imagegw-git.install
	depends = munge
	depends = curl
	depends = pam
	depends = squashfs-tools
	depends = mongodb
	depends = redis
	depends = jq
	depends = slurm-llnl
	depends = python2-celery
	depends = python2-pymongo
	depends = python2-flask
	depends = python2-redis
	depends = gunicorn-python2
	depends = python2-pylint
	provides = shifter-imagegw
	conflicts = shifter-imagegw
	conflicts = shifter-slurm-imagegw
	conflicts = shifter-imagegw-git

