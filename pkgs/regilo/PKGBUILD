# Generated by pakanton
# Maintainer: Branislav Hol√Ω <branoholy@gmail.com>
pkgbase='regilo'
pkgname=('regilo' 'regilo-lib')
pkgver='2.4.3'
pkgrel='1'
pkgdesc='A simple C++ library for controlling the Neato XV robot and the Hokuyo scanner'
arch=('i686' 'x86_64' 'arm' 'armv6h' 'armv7h' 'aarch64')
url='https://github.com/branoholy/regilo'
license=('GPL3')
makedepends=('cmake>=2.8' 'boost>=1.54')
source=("https://github.com/branoholy/regilo/archive/v$pkgver/regilo-$pkgver.tar.gz"
        "https://github.com/branoholy/regilo/releases/download/v$pkgver/regilo-$pkgver.tar.gz.sig")
md5sums=('ab52fca59391c89eafca6b52d16ffc97'
         '7257f3ed9762a5afe05c25e4374b0068')
sha1sums=('f4365daef12889aedbe138dfdde63a0369d96836'
          '66b250b46a3c3be90c0426fa06595293ae07d900')
sha256sums=('837d014506077831e6ec73f530aa8d5994f500d0e7e72c8c16ba2313e0047512'
            '746c562be7c311e121dbc3cd041967b43d4008eecffc7eb7ceb8222b230fe1af')
sha512sums=('90488a5ca3048627ddf71b958342c8a2671467f65be9a6202184b2ce41d017d8916a467daf7db0b69292ae942ef933d02b99db06c48e2feaedee941dd4273e61'
            'ce531fcf9d1a130d0b930962972f193d730acc0db5352e85af27fbe55dc059786fb229034a5b9be78efc55ee07894d1487c5598d621ef2aa045e30f0d8cd4d2b')
validpgpkeys=('D25809BF3563AA56A12B0F4D545EDD46FBAC61E6')

build() {
	cd $pkgbase-$pkgver

	mkdir -p builds/regilo && cd builds/regilo
	cmake -Dbuild-library:bool=on -Dinstall-headers:bool=on -Dexample:bool=on -DCMAKE_INSTALL_PREFIX=/usr ../..

	mkdir -p ../regilo-lib && cd ../regilo-lib
	cmake -Dinstall-library:bool=on -DCMAKE_INSTALL_PREFIX=/usr ../..
	rm -r CMakeFiles/regilo.dir/src CMakeFiles/regilo.dir/gen
	ln -s ../../../regilo/CMakeFiles/regilo.dir/src/ CMakeFiles/regilo.dir/src
	ln -s ../../../regilo/CMakeFiles/regilo.dir/gen/ CMakeFiles/regilo.dir/gen

	cd ../regilo
	make

	cd ../regilo-lib
	make
}

package_regilo() {
	pkgdesc='A simple C++ library for controlling the Neato XV robot and the Hokuyo scanner - development headers'
	depends=('boost>=1.54' "regilo-lib=$pkgver")

	cd regilo-$pkgver/builds/$pkgname
	make DESTDIR="$pkgdir/" install
}

package_regilo-lib() {
	pkgdesc='A simple C++ library for controlling the Neato XV robot and the Hokuyo scanner - runtime library'
	depends=('boost-libs>=1.54')

	cd regilo-$pkgver/builds/$pkgname
	make DESTDIR="$pkgdir/" install
}
