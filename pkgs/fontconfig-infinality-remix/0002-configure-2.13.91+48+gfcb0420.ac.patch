From f7d8de65f0c8328bb3f4f1e1ad3de2ba0ad9929c Mon Sep 17 00:00:00 2001
From: Solomon Choina <shlomochoina@gmail.com>
Date: Wed, 29 May 2019 15:51:56 -0400
Subject: [PATCH] configure-20190328.ac

---
 configure.ac | 17 ++++++++++++++++-
 1 file changed, 16 insertions(+), 1 deletion(-)

diff --git a/configure.ac b/configure.ac
index fb8af46..1db2c1d 100644
--- a/configure.ac
+++ b/configure.ac
@@ -620,9 +620,14 @@ AC_SUBST(FC_FONTDATE)

 AC_ARG_WITH(templatedir,
 	[AC_HELP_STRING([--with-templatedir=DIR],
-			[Use DIR to store the configuration template files [default=DATADIR/fontconfig/conf.avail]])],
+			[Use DIR to store the generic configuration template files [default=DATADIR/fontconfig/conf.avail]])],
 	[templatedir="$withval"],
 	[templatedir=yes])
+AC_ARG_WITH(templateinfdir,
+	[AC_HELP_STRING([--with-templateinfdir=DIR],
+			[Use DIR to store the Infinality compliant configuration template files [default=DATADIR/fontconfig/conf.avail.infinality]])],
+	[templateinfdir="$withval"],
+	[templateinfdir=yes])
 AC_ARG_WITH(baseconfigdir,
 	[AC_HELP_STRING([--with-baseconfigdir=DIR],
 			[Use DIR to store the base configuration files [default=SYSCONFDIR/fonts]])],
@@ -646,6 +651,13 @@ no|yes)
 *)
 	;;
 esac
+case "$templateinfdir" in
+no|yes)
+	templateinfdir='${datadir}'/fontconfig/conf.avail.infinality
+	;;
+*)
+	;;
+esac
 case "$baseconfigdir" in
 no|yes)
 	baseconfigdir='${sysconfdir}'/fonts
@@ -669,10 +681,12 @@ no|yes)
 esac

 TEMPLATEDIR=${templatedir}
+TEMPLATEINFDIR=${templateinfdir}
 BASECONFIGDIR=${baseconfigdir}
 CONFIGDIR=${configdir}
 XMLDIR=${xmldir}
 AC_SUBST(TEMPLATEDIR)
+AC_SUBST(TEMPLATEINFDIR)
 AC_SUBST(BASECONFIGDIR)
 AC_SUBST(CONFIGDIR)
 AC_SUBST(XMLDIR)
@@ -800,6 +814,7 @@ fc-lang/Makefile
 fc-case/Makefile
 src/Makefile
 conf.d/Makefile
+conf.d.infinality/Makefile
 fc-cache/Makefile
 fc-cat/Makefile
 fc-conflist/Makefile
--
2.21.0
